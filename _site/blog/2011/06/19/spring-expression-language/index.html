<!DOCTYPE html>
<html>
<head lang="zh-cn">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Begin Jekyll SEO tag v1.3.3 -->
<title>Spring3 表达式语言(SpEL)介绍 - Leeyee’s Blog</title>
<meta property="og:title" content="Spring3 表达式语言(SpEL)介绍">
<meta name="description" content="本文主要介绍Spring3表达式语言(SpEL)的相关功能">
<meta property="og:description" content="本文主要介绍Spring3表达式语言(SpEL)的相关功能">
<link rel="canonical" href="http://iyiguo.net/blog/2011/06/19/spring-expression-language/">
<meta property="og:url" content="http://iyiguo.net/blog/2011/06/19/spring-expression-language/">
<meta property="og:site_name" content="Leeyee’s Blog">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2011-06-19T00:00:00+08:00">
<link rel="next" href="http://iyiguo.net/blog/2011/11/14/plsql-sql-cud/" title="SQL增删改语句要点">
<link rel="prev" href="http://iyiguo.net/blog/2011/04/09/javascript-jquery-user-suggests/" title="一些关于javascript、jQuery使用时的建议">
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Spring3 表达式语言(SpEL)介绍",
    "datePublished": "2011-06-19T00:00:00+08:00",
    "description": "本文主要介绍Spring3表达式语言(SpEL)的相关功能",
    "url": "http://iyiguo.net/blog/2011/06/19/spring-expression-language/"
  }
</script>
<!-- End Jekyll SEO tag -->
    <link type="application/atom+xml" rel="alternate" href="http://iyiguo.net/feed.xml" title="Leeyee's Blog">
    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
    <link rel="stylesheet" href="/stylesheets/myprettify/tomorrow-night-eighties-prettity.css">
    <link rel="stylesheet" href="/stylesheets/self.css">
    
	
 		<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-40641589-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
 	
 	
		<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?58361582bf16c265b9a27cec274eb971";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	

</head>
<body>
<nav class="navbar navbar-default navbar-static-top">
    <div class="row">
        <div class="col-md-offset-1">
            <a class="navbar-brand" href="/">Leeyee's Blog</a>
            <ul class="nav navbar-nav ">
                <li>
<a href="/categorys">分类</a>
                </li>
<li>
<a href="/tags">标签</a>
                </li>
<li>
<a href="/archives">归档</a>
                </li>
<li><a href="/essay">essay</a></li>
                <li><a href="/about">关于我</a></li>
            </ul>
            <form class="navbar-form navbar-left" action="https://www.google.com.hk/search" method="get">
                <input type="hidden" name="q" value="site:iyiguo.net">
                <div class="form-group">
                    <input type="text" name="q" class="form-control" placeholder="Search">
                </div>
            </form>
        </div>
    </div>
</nav>
<div class="container">
    <div class="row">
        <div class="col-xs-12 col-md-8 col-lg-8">
            <div>
    <ol class="breadcrumb" style="background-color: #F3F8F1; ">
        <li><a href="/">首页</a></li>
        
        <li><a href="/categorys/#spring">spring</a></li>
        
        <li class="active">Spring3 表达式语言(SpEL)介绍</li>
    </ol>
</div>
<div class="panel panel-primary">
    <div class="panel-heading">
        <h1 class="panel-title self-panel-title"> Spring3 表达式语言(SpEL)介绍 </h1>
    </div>
    <div class="panel-body">
        <address class="text-info">
        </address>
        <div id="j_article">
            <div class="alert alert-warning" role="alert">
                <strong>版权声明：</strong>
                <ul>
                    <li>关于<a href="http://iyiguo.net/blog/2011/06/19/spring-expression-language/">《Spring3 表达式语言(SpEL)介绍》</a>的一切权利归作者<a href="mailto:seadlead@gmail.com">@Leeyee</a>所有；</li>
                    <li>非商用、非衍生;</li>
                    <li>如需转载需要注明来源于<a href="http://iyiguo.net/blog/2011/06/19/spring-expression-language/">http://iyiguo.net/blog/2011/06/19/spring-expression-language/</a>
</li>
                </ul>
            </div>
            <p><a href="http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch07.html">Spring Expression Language (SpEL)</a>语言支持在运行时操作和查询对象，其语法类似统一的EL语言，但是<a href="http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch07.html" title="SpEL">SpEL</a>提供了额外的功能。<a href="http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch07.html" title="SpEL">SpEL</a>支持以下功能：</p>

<ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">2.1 文本表达式</a></li>
  <li><a href="#map" id="markdown-toc-map">2.2 属性、数组、列表、字典(map)及索引</a></li>
  <li><a href="#section-1" id="markdown-toc-section-1">2.3 内置列表</a></li>
  <li><a href="#spring303" id="markdown-toc-spring303">2.4 数组构造(spring3.0.3中会抛出异常)</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">2.5 方法调用</a></li>
  <li>
<a href="#section-3" id="markdown-toc-section-3">2.6 操作符</a>    <ul>
      <li><a href="#section-4" id="markdown-toc-section-4">2.6.1 关系操作符</a></li>
      <li><a href="#section-5" id="markdown-toc-section-5">2.6.2 逻辑操作符</a></li>
      <li><a href="#section-6" id="markdown-toc-section-6">2.6.3 数学运算操作符</a></li>
    </ul>
  </li>
  <li><a href="#section-7" id="markdown-toc-section-7">2.7 赋值操作</a></li>
  <li>
<a href="#section-8" id="markdown-toc-section-8">2.8 类型</a>    <ul>
      <li><a href="#section-9" id="markdown-toc-section-9">2.9 构造器</a></li>
    </ul>
  </li>
  <li>
<a href="#section-10" id="markdown-toc-section-10">2.10 变量</a>    <ul>
      <li><a href="#this" id="markdown-toc-this">2.10.1 <code class="highlighter-rouge">#this</code>变量</a></li>
    </ul>
  </li>
  <li><a href="#section-11" id="markdown-toc-section-11">2.11 用户自定义函数</a></li>
  <li><a href="#section-12" id="markdown-toc-section-12">2.12 三元操作</a></li>
  <li>
<a href="#elvis" id="markdown-toc-elvis">2.13 Elvis操作</a>    <ul>
      <li><a href="#section-13" id="markdown-toc-section-13">2.14 安全导航操作</a></li>
    </ul>
  </li>
  <li><a href="#section-14" id="markdown-toc-section-14">2.15 集合选择</a></li>
  <li><a href="#section-15" id="markdown-toc-section-15">2.16 集合投影</a></li>
  <li><a href="#section-16" id="markdown-toc-section-16">2.17 模板表达式</a></li>
  <li><a href="#section-17" id="markdown-toc-section-17">一大段测试用例</a></li>
</ul>

<p>使用SpEl进行表达式操作，基本操作如下：</p>

<p>第一步，构建解析</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>ExpressionParser parser = new SpelExpressionParser();
</code></pre>
</div>

<p>第二步，使用表达式进行解析</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>Expression exp = parser.parseExpression( SpEl);
</code></pre>
</div>

<p>第三步，获取结果</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>exp.getValue()
</code></pre>
</div>

<h2 id="section">2.1 文本表达式</h2>

<p>文本表达式支持字符表达式、日期、数字（正数、实数及十六进制数）、布尔类型及null.其中字符表达式需要用单引号声明。</p>

<p>对数字支持负数、指数及小数。默认情况下实数使用<code class="highlighter-rouge">Double.parseDouble()</code>进行表达式类型转换</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>String[] lELs = { "'hello SpEL'", "1.028E+7", "0x12EF", "true", "null" };
assertEquals("hello SpEL",
		exp.parseExpression(lELs[0]).getValue(String.class));
assertEquals(new Double(10280000), exp.parseExpression(lELs[1])
		.getValue(Double.class));
assertEquals(new Integer(4847),
		exp.parseExpression(lELs[2]).getValue(Integer.class));
assertTrue(exp.parseExpression(lELs[3]).getValue(Boolean.class));
assertNull(exp.parseExpression(lELs[4]).getValue());
</code></pre>
</div>

<h2 id="map">2.2 属性、数组、列表、字典(map)及索引</h2>

<p>在表达式中访问类属性时直接使用属性名，属性名首字母大小写均可。</p>

<p>访问数组时可以使用[index]进行元素对象范围。</p>

<p>访问列表时，可直接使用类表的方法，通过点操作符</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>// 属性测试。time为SpElUtil类Date型数据，这里调用Date的属性Year
assertEquals(new Integer(2011), exp.parseExpression("time.Year + 1900")
		.getValue(secontext, Integer.class));

// 属性测试。innerClass为SpElUtil类中引入的其他类。
assertEquals(29,
		exp.parseExpression("innerClass.age").getValue(secontext));

// 设置SpElUtil类的numbers属性
spel.setNumbers(Arrays.asList(2, 3, 4, 5, 6, 7, 9));

// 访问对象属性数组通过索引
assertEquals(2, exp.parseExpression("numbers[0]").getValue(secontext));

// 访问map
assertEquals("string1",
		exp.parseExpression("maps[1]")
				.getValue(secontext, String.class));
</code></pre>
</div>

<h2 id="section-1">2.3 内置列表</h2>

<p>列表可以直接表示在表达式中使用<code class="highlighter-rouge"><span class="p">{}</span></code>符号表达。<code class="highlighter-rouge"><span class="p">{}</span></code>本身代表一个空的<code class="highlighter-rouge">list</code></p>

<div class="highlighter-rouge">
<pre class="highlight"><code>// 构造list
List&lt;String&gt; nums = (List&lt;String&gt;) exp.parseExpression(
		"{'a','b','c','d'}").getValue();
assertEquals(Arrays.asList("a", "b", "c", "d"), nums);

// 构造List&lt;List&lt;&gt;&gt;
List listOfLists = (List) exp.parseExpression("{ {1,2},{3,4} }")
		.getValue(secontext);
assertEquals(Arrays.asList(1, 2), listOfLists.get(0));
</code></pre>
</div>

<h2 id="spring303">2.4 数组构造(spring3.0.3中会抛出异常)</h2>

<p>可以通过熟悉的java语法在表达是语言中定义。但目前不支持定义一个初始化的多维数组</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>// 创建没有初始值的数组
int[] a = (int[]) exp.parseExpression("new int[4]").getValue();
assertEquals(4, a.length);

// 创建带有初始值的数组
int[] b = (int[]) exp.parseExpression("new int[4]{1,2,3,4}").getValue();
assertEquals(3, b[2]);

// 创建二维数组
int[][] c = (int[][]) exp.parseExpression("new int[4][5]").getValue();
assertEquals(4, c.length);
assertEquals(5, c[0].length);
</code></pre>
</div>

<h2 id="section-2">2.5 方法调用</h2>

<p>表达式中的方法调用遵循java语法。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>assertEquals(
		"abC2def",
		exp.parseExpression("'abcdef'.replace('c','C2')").getValue(
					String.class));

// 自定义类方法测试
assertFalse(exp.parseExpression("innerClass.isGt30ForAge()").getValue(
		secontext, Boolean.class));
spel.getInnerClass().setAge(34);
assertTrue(exp.parseExpression("innerClass.isGt30ForAge()").getValue(
		secontext, Boolean.class));
</code></pre>
</div>

<h2 id="section-3">2.6 操作符</h2>

<h3 id="section-4">2.6.1 关系操作符</h3>

<p>支持<code class="highlighter-rouge">eq("==")</code>、<code class="highlighter-rouge">ne("!=")</code>、<code class="highlighter-rouge">le("&lt;=")</code>、<code class="highlighter-rouge">lt("&lt;")</code>、<code class="highlighter-rouge">gt("&gt;")</code>、<code class="highlighter-rouge">ge("&gt;=")</code>、<code class="highlighter-rouge">div("/")</code>、<code class="highlighter-rouge">mod("%")</code>、<code class="highlighter-rouge">not("!")</code>、正则表达式及<code class="highlighter-rouge">instanceof</code>操作</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>assertTrue(exp.parseExpression("1 == 1").getValue(Boolean.class));
assertTrue(exp.parseExpression("1 eq 1").getValue(Boolean.class));
assertTrue(exp.parseExpression("1 &gt; -1").getValue(Boolean.class));
assertTrue(exp.parseExpression("1 gt -1").getValue(Boolean.class));
assertTrue(exp.parseExpression("'a' &lt; 'b'").getValue(Boolean.class));
assertTrue(exp.parseExpression("'a' lt 'b'").getValue(Boolean.class));
assertTrue(exp.parseExpression(
		" new Integer(123) instanceof T(Integer) ").getValue(
		Boolean.class));
assertTrue(exp.parseExpression("'5.00' matches '^-?\\d+(\\.\\d{2})?$'")
			.getValue(Boolean.class));
</code></pre>
</div>

<h3 id="section-5">2.6.2 逻辑操作符</h3>

<p>逻辑操作符支持<code class="highlighter-rouge">and</code>,<code class="highlighter-rouge">or</code>,<code class="highlighter-rouge">not</code></p>

<div class="highlighter-rouge">
<pre class="highlight"><code>assertTrue(exp.parseExpression("true and true").getValue(Boolean.class));
</code></pre>
</div>

<h3 id="section-6">2.6.3 数学运算操作符</h3>

<p>加法运算符可以用于数字，字符串和日期。减法可以用在数字和日期。乘法和除法只能用于对数字。其他受支持的数学运算是模数（％）和指数幂（^）。运行顺序按标准运算符优先级执行</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>assertEquals(25.0,
		exp.parseExpression("1 + 2 * 8 div 4 mod 2 + 2 ^ 3 * 3e0")
				.getValue());
</code></pre>
</div>

<h2 id="section-7">2.7 赋值操作</h2>

<p>通过赋值操作进行属性设置。通常是调用<code class="highlighter-rouge">setValue</code>方法，但也可以在调用<code class="highlighter-rouge">getValue</code>时设置。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>Date oldDate = spel.getTime();// 获取当前time属性值
exp.parseExpression("time").setValue(secontext, new Date(113, 2, 25)); // 为time属性重新赋值
Date newDate = spel.getTime();// 获取赋值后的time属性值
assertEquals(2013,
		exp.parseExpression("time.Year + 1900").getValue(secontext));
assertNotSame(oldDate, newDate);

// 或者使用下属方法赋值
assertEquals("abc",
		exp.parseExpression("Name = 'abc'").getValue(secontext));
</code></pre>
</div>

<h2 id="section-8">2.8 类型</h2>

<p>通过特殊的<code class="highlighter-rouge">T</code>操作符可以用来指定一个<code class="highlighter-rouge">java.lang.Class</code>的实例。在实例话对象的静态方法将会被调用。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>Class dateClass = exp.parseExpression("T(java.util.Date)").getValue(Class.class);
assertEquals("java.util.Date", dateClass.getName());
assertTrue(exp
		.parseExpression(
				"T(java.math.RoundingMode).CEILING &lt; T(java.math.RoundingMode).FLOOR")
		.getValue(Boolean.class));		
</code></pre>
</div>

<h3 id="section-9">2.9 构造器</h3>

<p>构造器通过<code class="highlighter-rouge">new</code>操作被调用。在<code class="highlighter-rouge">new</code>操作时需要指明类的完全类名(包括包路径)</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>SpelTestInnerClass spt = exp
		.parseExpression(
				"new  leeyee.study.spring3.bean.SpelTestInnerClass('constructTest',23)")
		.getValue(SpelTestInnerClass.class);
</code></pre>
</div>

<h2 id="section-10">2.10 变量</h2>

<p>变量可以通过 <code class="highlighter-rouge">#变量名</code> 在表达式中被引用。变量通过<code class="highlighter-rouge">StandardEvaluationContext</code>类的<code class="highlighter-rouge">setVariable</code>方法进行设置</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();
list.addAll(Arrays.asList(2, 3, 4, 5, 6, 7, 9));

secontext.setVariable("list", list);
List&lt;Integer&gt; vList = (List&lt;Integer&gt;) exp.parseExpression("#list")
		.getValue(secontext);
assertEquals(vList, list);
</code></pre>
</div>

<h3 id="this">2.10.1 <code class="highlighter-rouge">#this</code>变量</h3>

<p>变量<code class="highlighter-rouge">#this</code>被定义为当前操作对象的引用。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>List&lt;Integer&gt; nums = (List&lt;Integer&gt;) exp.parseExpression(
		"#list.?[#this &gt;5]").getValue(secontext); // 获取值大于5的元素集合
assertEquals(nums, Arrays.asList(6, 7, 9));
</code></pre>
</div>

<h2 id="section-11">2.11 用户自定义函数</h2>

<p>你可以扩展<a href="http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch07.html" title="SpEL">SpEL</a>通过注册自定义函数。注册后的函数可以在表达式中通过其名称进行调用。函数的注册是通过<code class="highlighter-rouge">StandardEvaluationContext</code>类的<code class="highlighter-rouge">registerFunction</code>方法进行声明</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>context.registerFunction("len", SpElUtil.class.getDeclaredMethod("len",
		new Class[] { String.class }));
assertEquals(3, exp.parseExpression("#len('abc')").getValue(context));
</code></pre>
</div>

<h2 id="section-12">2.12 三元操作</h2>

<div class="highlighter-rouge">
<pre class="highlight"><code>assertTrue(exp.parseExpression(" true ? true :false").getValue(
		Boolean.class));
</code></pre>
</div>

<h2 id="elvis">2.13 Elvis操作</h2>

<p><code class="highlighter-rouge">Elvis</code>操作是一个短的三元操作符语法，通常在<a href="https://zh.wikipedia.org/wiki/Groovy" title="Groovy">Groovy</a>语言中使用。</p>

<blockquote>
  <p><strong>Note:</strong> <code class="highlighter-rouge">Elvis</code>操作在表达式中可以用来生成默认值，当被访问属性为空时。比如<code class="highlighter-rouge">@Value</code></p>
</blockquote>

<div class="highlighter-rouge">
<pre class="highlight"><code>@Value("#systemPro['mail.port'] ? : 25}")
// 当mail.port为空时将默认为25
Expression ex = exp.parseExpression("name?:'name is null'");
assertEquals("override", ex.getValue(secontext, String.class));
spel.setName(null);
assertEquals("name is null", ex.getValue(secontext, String.class));
spel.setName("override");
</code></pre>
</div>

<h3 id="section-13">2.14 安全导航操作</h3>

<p>该操作是为避免空指针异常。他是来自<a href="https://zh.wikipedia.org/wiki/Groovy" title="Groovy">Groovy</a>语言的。典型的当你有一个指向对象的引用，在你访问其方法或属性时，可能需要验证该对象的方法或属性是否为空，为了避免验证，使用安全导航操作将简单的返回<code class="highlighter-rouge">null</code>而不是空指针异常。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>assertEquals("innerClass", exp.parseExpression("innerClass?.name")
		.getValue(secontext, String.class));
spel.setInnerClass(null);
// 使用这种表达式可以避免抛出空指针异常
assertNull(exp.parseExpression("innerClass?.name").getValue(secontext,
		String.class));
</code></pre>
</div>

<h2 id="section-14">2.15 集合选择</h2>

<p>选择是一个强大的表达式语言属性，可以使用选择表达式过滤源集合，从而生成一个新的符合选择条件的集合</p>

<p>选择的语法为<code class="highlighter-rouge">?[selectionExpression]</code>。他将过滤集合并且返回一个新的集合（原集合的子集）。选择语句也可用在Map中，过滤keySet及valueSet分别使用key和value关键字。另外：选择语法中，选择符合条件的结果集的第一个元素的语法为 <code class="highlighter-rouge">^[selectionExpression]</code>，选择最后一个元素的语法为<code class="highlighter-rouge">$[selectionExpression]</code></p>

<div class="highlighter-rouge">
<pre class="highlight"><code>spel.setNumbers(Arrays.asList(2, 3, 4, 5, 6, 7, 9));

List&lt;Integer&gt; nums = (List&lt;Integer&gt;) exp.parseExpression(
		"numbers.?[#this &gt;5]").getValue(secontext);
assertEquals(nums, Arrays.asList(6, 7, 9));

// 获取第一个元素
assertEquals(6,
		exp.parseExpression("numbers.^[#this &gt; 5]").getValue(secontext));
        
// 获取最后一个元素
assertEquals(9,
		exp.parseExpression("numbers.$[#this &gt; 5]").getValue(secontext));

Map&lt;Integer, String&gt; maps = (Map&lt;Integer, String&gt;) exp.parseExpression(
		"maps.?[value == 'string3' ]").getValue(secontext);
Map&lt;Integer, String&gt; tmap = new HashMap&lt;Integer, String&gt;();
tmap.put(3, "string3");
assertEquals(maps, tmap);

Map&lt;Integer, String&gt; mapk = (Map&lt;Integer, String&gt;) exp.parseExpression(
		"maps.?[key &gt; 2 and key &lt; 4 ]").getValue(secontext);
assertEquals(mapk, tmap);
</code></pre>
</div>

<h2 id="section-15">2.16 集合投影</h2>

<p>语法<code class="highlighter-rouge">![projectionExpression]</code>判断集合中每个元素是否符合语法要求</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>assertEquals(Arrays.asList(5, 6, 7, 8, 9), exp
		.parseExpression("numbers.![#this+3]").getValue(secontext));
</code></pre>
</div>

<h2 id="section-16">2.17 模板表达式</h2>

<p>表达式模板允许混合文字表达式，一个或多个值计算块。每一个值计算块被声明通过可被自定义的前缀和后缀，一般选择使用<code class="highlighter-rouge">#{}</code>作为一个定界符。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>assertEquals(
		" this is a test 4",
		exp.parseExpression(" this is a test #{ maps.![key].get(3)}",
				new TemplateParserContext()).getValue(secontext,
				String.class));
</code></pre>
</div>

<h2 id="section-17">一大段测试用例</h2>

<div class="highlighter-rouge">
<pre class="highlight"><code>import static org.junit.Assert.*;
import java.util.*;
import org.junit.*;

import org.springframework.context.ApplicationContext;
import org.springframework.expression.Expression;
import org.springframework.expression.ExpressionParser;
import org.springframework.expression.common.TemplateParserContext;
import org.springframework.expression.spel.standard.SpelExpressionParser;
import org.springframework.expression.spel.support.StandardEvaluationContext;

import study.spring.context.factory.ApplicationContextFactory;

public class SpElUtilTest {
	// spring配置文件上下文
	ApplicationContext context = null;
	// spring el测试辅助类
	SpElUtil spel = null;
	// 表达式解析对象
	ExpressionParser exp = null;
	// 标准赋值上下文
	StandardEvaluationContext secontext;

	@Before
	public void setUp() throws Exception {
		context = ApplicationContextFactory.createInstance();
		spel = context.getBean(SpElUtil.class);
		secontext = new StandardEvaluationContext(spel);
		exp = new SpelExpressionParser();
	}

	@After
	public void tearDown() throws Exception {
		context = null;
		spel = null;
		secontext = null;
		exp = null;
	}

	/**
	 * 文字表达式测试用例
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpELLiteralExpression() throws Exception {
		// 定义各种文字表达式
		String[] lELs = { "'hello SpEL'", "1.028E+7", "0x12EF", "true", "null" };
		assertEquals("hello SpEL",
				exp.parseExpression(lELs[0]).getValue(String.class));
		assertEquals(new Double(10280000), exp.parseExpression(lELs[1])
				.getValue(Double.class));
		assertEquals(new Integer(4847),
				exp.parseExpression(lELs[2]).getValue(Integer.class));
		assertTrue(exp.parseExpression(lELs[3]).getValue(Boolean.class));
		assertNull(exp.parseExpression(lELs[4]).getValue());
	}

	/**
	 * 访问属性、数组、集合和 map 测试
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpELProOrArrayOrIndexEtcExpression() throws Exception {
		// 属性测试。time为SpElUtil类Date型数据，这里调用Date的属性Year
		assertEquals(new Integer(2011), exp.parseExpression("time.Year + 1900")
				.getValue(secontext, Integer.class));

		// 属性测试。innerClass为SpElUtil类中引入的其他类。
		assertEquals(29,
				exp.parseExpression("innerClass.age").getValue(secontext));

		// 设置SpElUtil类的numbers属性
		spel.setNumbers(Arrays.asList(2, 3, 4, 5, 6, 7, 9));

		// 访问对象属性数组通过索引
		assertEquals(2, exp.parseExpression("numbers[0]").getValue(secontext));

		// 访问map
		assertEquals("string1",
				exp.parseExpression("maps[1]")
						.getValue(secontext, String.class));

	}

	/**
	 * 内联list测试
	 * 
	 * @throws Exception
	 */
	@SuppressWarnings({ "unchecked", "rawtypes" })
	@Test
	public void testSpELInnerListExpression() throws Exception {
		// 构造list
		List&lt;String&gt; nums = (List&lt;String&gt;) exp.parseExpression(
				"{'a','b','c','d'}").getValue();
		assertEquals(Arrays.asList("a", "b", "c", "d"), nums);
		// 构造List&lt;List&lt;&gt;&gt;
		List listOfLists = (List) exp.parseExpression("{ {1,2},{3,4} }")
				.getValue(secontext);
		assertEquals(Arrays.asList(1, 2), listOfLists.get(0));
	}

	/**
	 * Array 构造测试
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpELArrayConstructionExcpression() throws Exception {
		// 创建没有初始值的数组
		int[] a = (int[]) exp.parseExpression("new int[4]").getValue();
		assertEquals(4, a.length);
		// 创建带有初始值的数组
		int[] b = (int[]) exp.parseExpression("new int[4]{1,2,3,4}").getValue();
		assertEquals(3, b[2]);
		// 创建二维数组
		int[][] c = (int[][]) exp.parseExpression("new int[4][5]").getValue();
		assertEquals(4, c.length);
		assertEquals(5, c[0].length);
	}

	/**
	 * 方法表达式测试
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpELMethodExcpression() throws Exception {
		// String.replace方法测试
		assertEquals(
				"abC2def",
				exp.parseExpression("'abcdef'.replace('c','C2')").getValue(
						String.class));

		// 自定义类方法测试
		assertFalse(exp.parseExpression("innerClass.isGt30ForAge()").getValue(
				secontext, Boolean.class));
		spel.getInnerClass().setAge(34);
		assertTrue(exp.parseExpression("innerClass.isGt30ForAge()").getValue(
				secontext, Boolean.class));
	}

	/**
	 * 操作符、正则表达式测试
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpElOperatorAndRegExpression() throws Exception {
		// 关系操作
		assertTrue(exp.parseExpression("1 == 1").getValue(Boolean.class));
		assertTrue(exp.parseExpression("1 eq 1").getValue(Boolean.class));
		assertTrue(exp.parseExpression("1 &gt; -1").getValue(Boolean.class));
		assertTrue(exp.parseExpression("1 gt -1").getValue(Boolean.class));
		assertTrue(exp.parseExpression("'a' &lt; 'b'").getValue(Boolean.class));
		assertTrue(exp.parseExpression("'a' lt 'b'").getValue(Boolean.class));
		assertTrue(exp.parseExpression(
				" new Integer(123) instanceof T(Integer) ").getValue(
				Boolean.class));
		assertTrue(exp.parseExpression("'5.00' matches '^-?\\d+(\\.\\d{2})?$'")
				.getValue(Boolean.class));
		// 逻辑操作
		assertTrue(exp.parseExpression("true and true").getValue(Boolean.class));
		assertTrue(exp.parseExpression("true or false").getValue(Boolean.class));
		assertFalse(exp.parseExpression("innerClass.isGt30ForAge() and false ")
				.getValue(secontext, Boolean.class));
		assertFalse(exp.parseExpression("!innerClass.isGt30ForAge() and true ")
				.getValue(secontext, Boolean.class));
		assertTrue(exp.parseExpression("!false").getValue(Boolean.class));
		// 运算操作
		assertEquals(2, exp.parseExpression("1 + 1").getValue());
		assertEquals("ABab",
				exp.parseExpression("'AB' + 'ab'").getValue(String.class));
		assertEquals(25.0,
				exp.parseExpression("1 + 2 * 8 div 4 mod 2 + 2 ^ 3 * 3e0")
						.getValue());
		assertEquals(exp.parseExpression("1 + 2 * 8 / 4 % 2 + 2 ^ 3 ")
				.getValue(),
				exp.parseExpression("1 + 2 * 8 div 4 mod 2 + 2 ^ 3 ")
						.getValue());
	}

	/**
	 * 赋值表达式测试
	 * 
	 * @throws Exception
	 */
	@SuppressWarnings("deprecation")
	@Test
	public void testSpelAssignmentExpression() throws Exception {
		Date oldDate = spel.getTime();// 获取当前time属性值
		exp.parseExpression("time").setValue(secontext, new Date(113, 2, 25)); // 为time属性重新赋值
		Date newDate = spel.getTime();// 获取赋值后的time属性值
		assertEquals(2013,
				exp.parseExpression("time.Year + 1900").getValue(secontext));
		assertNotSame(oldDate, newDate);

		// 或者使用下属方法赋值
		assertEquals("abc",
				exp.parseExpression("Name = 'abc'").getValue(secontext));

		// 还原time默认，避免后续测试错误
		spel.setTime(oldDate);
		spel.setName("override");
	}

	/**
	 * 类型操作表达式测试
	 * 
	 * @throws Exception
	 */
	@SuppressWarnings("rawtypes")
	@Test
	public void testSpelTypesExpression() throws Exception {
		Class dateClass = exp.parseExpression("T(java.util.Date)").getValue(
				Class.class);
		assertEquals("java.util.Date", dateClass.getName());
		assertTrue(exp
				.parseExpression(
						"T(java.math.RoundingMode).CEILING &lt; T(java.math.RoundingMode).FLOOR")
				.getValue(Boolean.class));
	}

	/**
	 * 构造函数调用测试
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpelConstructorsExpression() throws Exception {
		SpelTestInnerClass spt = exp
				.parseExpression(
						"new study.spring.beans.SpelTestInnerClass('constructTest',23)")
				.getValue(SpelTestInnerClass.class);
		assertEquals(23, spt.getAge());
		assertEquals("constructTest", spt.getName());
	}

	/**
	 * 设置变量测试
	 * 
	 * @throws Exception
	 */
	@SuppressWarnings("unchecked")
	@Test
	public void testSpelVariablesExpression() throws Exception {
		List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();
		list.addAll(Arrays.asList(2, 3, 4, 5, 6, 7, 9));

		secontext.setVariable("list", list);
		List&lt;Integer&gt; vList = (List&lt;Integer&gt;) exp.parseExpression("#list")
				.getValue(secontext);
		assertEquals(vList, list);

		List&lt;Integer&gt; nums = (List&lt;Integer&gt;) exp.parseExpression(
				"#list.?[#this &gt;5]").getValue(secontext); // 获取值大于5的元素集合
		assertEquals(nums, Arrays.asList(6, 7, 9));
	}

	/**
	 * 自定义函数表达式测试
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpelFunctionExpression() throws Exception {
		StandardEvaluationContext context = new StandardEvaluationContext();
		context.registerFunction("len", SpElUtil.class.getDeclaredMethod("len",
				new Class[] { String.class }));
		assertEquals(3, exp.parseExpression("#len('abc')").getValue(context));
	}

	@Test
	public void testSpelBeanExpression() throws Exception {

	}

	/**
	 * 三元操作测试
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpelTernaryOperatorExpression() throws Exception {
		assertTrue(exp.parseExpression(" true ? true :false").getValue(
				Boolean.class));
		assertEquals("is true",
				exp.parseExpression(" 1 == 1 ? 'is true' :'is false'")
						.getValue(String.class));
	}

	/**
	 * Elvis 操作测试
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpeleElvisOperatorExpression() throws Exception {
		Expression ex = exp.parseExpression("name?:'name is null'");
		assertEquals("override", ex.getValue(secontext, String.class));
		spel.setName(null);
		assertEquals("name is null", ex.getValue(secontext, String.class));
		spel.setName("override");
	}

	/**
	 * 安全导航操作测试
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpelSafeNavOperatorExpression() throws Exception {
		assertEquals("innerClass", exp.parseExpression("innerClass?.name")
				.getValue(secontext, String.class));
		spel.setInnerClass(null);
		// 使用这种表达式可以避免抛出空指针异常
		assertNull(exp.parseExpression("innerClass?.name").getValue(secontext,
				String.class));

	}

	/**
	 * 集合选择表达式测试
	 * 
	 * @throws Exception
	 */
	@SuppressWarnings("unchecked")
	@Test
	public void testSpelCollectionSelectExpression() throws Exception {
		spel.setNumbers(Arrays.asList(2, 3, 4, 5, 6, 7, 9));

		List&lt;Integer&gt; nums = (List&lt;Integer&gt;) exp.parseExpression(
				"numbers.?[#this &gt;5]").getValue(secontext);
		assertEquals(nums, Arrays.asList(6, 7, 9));
		// 获取第一个元素
		assertEquals(6,
				exp.parseExpression("numbers.^[#this &gt; 5]").getValue(secontext));
		// 获取最后一个元素
		assertEquals(9,
				exp.parseExpression("numbers.$[#this &gt; 5]").getValue(secontext));

		Map&lt;Integer, String&gt; maps = (Map&lt;Integer, String&gt;) exp.parseExpression(
				"maps.?[value == 'string3' ]").getValue(secontext);
		Map&lt;Integer, String&gt; tmap = new HashMap&lt;Integer, String&gt;();
		tmap.put(3, "string3");
		assertEquals(maps, tmap);

		Map&lt;Integer, String&gt; mapk = (Map&lt;Integer, String&gt;) exp.parseExpression(
				"maps.?[key &gt; 2 and key &lt; 4 ]").getValue(secontext);
		assertEquals(mapk, tmap);

	}

	/**
	 * 投影表达式测试
	 * 
	 * @throws Exception
	 */
	@SuppressWarnings("unchecked")
	@Test
	public void testSpelProjectionExpression() throws Exception {
		spel.setNumbers(Arrays.asList(2, 3, 4, 5, 6));

		assertEquals(Arrays.asList(5, 6, 7, 8, 9),
				exp.parseExpression("numbers.![#this+3]").getValue(secontext));

		List&lt;Integer&gt; keys = (List&lt;Integer&gt;) exp.parseExpression("maps.![key]")
				.getValue(secontext);
		assertEquals(keys, Arrays.asList(1, 2, 3, 4));

		List&lt;String&gt; mapv = (List&lt;String&gt;) exp.parseExpression("maps.![value]")
				.getValue(secontext);
		assertEquals(mapv,
				Arrays.asList("string1", "string2", "string3", "String4"));

		List&lt;Boolean&gt; mapK = (List&lt;Boolean&gt;) exp.parseExpression(
				"maps.![key &gt; 2 and value !='String4']").getValue(secontext);
		assertEquals(mapK, Arrays.asList(false, false, true, false));
	}

	/**
	 * 模板语言测试
	 * 
	 * @throws Exception
	 */
	@Test
	public void testSpelTemplate() throws Exception {
		assertEquals(
				" this is a test 4",
				exp.parseExpression(" this is a test #{ maps.![key].get(3)}",
						new TemplateParserContext()).getValue(secontext,
						String.class));
	}
}
</code></pre>
</div>


        </div>
        <div class="alert alert-info" role="alert">
            <strong>相关阅读：</strong>
            <ul>
                                                                       
                 <!--capture的变量均为字符串-->
                <li><a href="/blog/2016/01/19/spring-retry-common-case/">Spring Retry 常用示例</a></li>
                   
                 <!--capture的变量均为字符串-->
                <li><a href="/blog/2016/01/17/spring-retry-simple-introduce/">Spring Retry 简介</a></li>
                                                                                           
                 <!--capture的变量均为字符串-->
                <li><a href="/blog/2011/06/19/spring-expression-language/">Spring3 表达式语言(SpEL)介绍</a></li>
                                 
            </ul>
        </div>
    </div>
    <div class="panel-footer">
        <span class="glyphicon glyphicon-calendar"></span>
        
        <a href="/archives/#2011-06">2011年06月19日</a>
        
        <span class="glyphicon glyphicon-user"></span>
         leeyee 
        
        <span class="glyphicon glyphicon-folder-close"></span>
        <a href="/categorys/#spring"> spring</a>
        
         <span class="glyphicon glyphicon-tags"></span> spring,译文 
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-body">
        <div class="pull-right">
	
		<!-- JiaThis Button BEGIN -->
<div class="jiathis_style_24x24">
     <a class="jiathis_button_tsina"></a>
     <a class="jiathis_button_qzone"></a>
     <a class="jiathis_button_tqq"></a>
     <a class="jiathis_button_renren"></a>
     <a class="jiathis_button_t163"></a>
     <a class="jiathis_button_tsohu"></a>
     <a class="jiathis_button_douban"></a>
     <!--<a href="http://www.jiathis.com/share?uid=1785947" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>-->
     <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript">
var jiathis_config = {data_track_clickback:'true'};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1354586152725188" charset="utf-8"></script>
<!-- JiaThis Button END -->
	
</div>
        <div>
	
			<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'oxcow'; // required: replace example with your forum shortname

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script');
		dsq.type = 'text/javascript';
		dsq.async = true;
		dsq.src = 'https://a.disquscdn.com/embed.js';
		//dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document
				.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>
	Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<!--<a href="http://disqus.com" class="dsq-brlink">comments powered by <span
	class="logo-disqus">Disqus</span></a>-->
		

	</div>
    </div>
</div>
        </div>
        <div class="col-xs-6 col-md-4 col-lg-4">
            <div class="panel panel-default">
                <div class="panel-body">
                    <a href="/feed.xml"><img src="/img/rss.png" class="self-img-40">RSS 本站</a>
                </div>
            </div>
            <!-- 本站公告 -->
            <div class="panel panel-primary">
    <div class="panel-heading">
        <h2 class="panel-title">本站公告</h2>
    </div>
    <div class="panel-body">
        新版页面陆续建设中，敬请期待......
    </div>
</div>
            <!-- Google Adsense -->
            <!--<div class="panel panel-primary">
    <div class="panel-heading">
        <h2 class="panel-title">Google Adsense</h2>
    </div>
    <div class="panel-body">
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-3709356780361184"
            data-ad-slot="2345263955"
            data-ad-format="auto"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
</div>
-->
            <!-- 最新文章 -->
            <div class="panel panel-primary">
    <div class="panel-heading">
        <h2 class="panel-title">最新文章</h2>
    </div>
    <div class="list-group">
<!--        <a  class="list-group-item active">最新文章</a>-->
        
        <a href="/blog/2016/11/06/stripes-how-to-wizard_forms/" class="list-group-item">Stripes框架如何做系列-向导表单</a>
        
        <a href="/blog/2016/09/15/stripes-how-to-use_defaults_more/" class="list-group-item">Stripes框架如何做系列-更多使用默认配置</a>
        
        <a href="/blog/2016/09/10/stripes-how-to-unit_testing/" class="list-group-item">Stripes框架如何做系列-单元测试</a>
        
        <a href="/blog/2016/08/25/stripes-how-to-state_management/" class="list-group-item">Stripes框架如何做系列-状态管理</a>
        
        <a href="/blog/2016/08/21/stripes-how-to-localization/" class="list-group-item">Stripes框架如何做系列-本地化</a>
        
        <a href="/blog/2016/08/03/stripes-how-to-spring-with-stripes/" class="list-group-item">Stripes框架如何做系列-Spring和Stripes</a>
        
        <a href="/blog/2016/07/22/stripes-how-to-indexed-properties/" class="list-group-item">Stripes框架如何做系列-索引属性</a>
        
        <a href="/blog/2016/07/17/stripes-how-to-layout-reuse/" class="list-group-item">Stripes框架如何做系列-布局复用</a>
        
        <a href="/blog/2016/07/16/stripes-how-to-intercept-execution/" class="list-group-item">Stripes框架如何做系列-拦截器</a>
        
        <a href="/blog/2016/07/13/stripes-how-to-file-uploads/" class="list-group-item">Stripes框架如何做系列-文件上传</a>
        
    </div>
</div>

            <!-- 文章标签 -->
            <div class="panel panel-primary">
    <div class="panel-heading">
        <h2 class="panel-title">文章标签</h2>
    </div>
    <div class="list-group">
       <!-- <a  class="list-group-item active">文章标签</a>-->
        
        <a href="/tags#javascript" class="list-group-item">javascript<span class="badge">9</span></a>
        
        <a href="/tags#struts2" class="list-group-item">struts2<span class="badge">1</span></a>
        
        <a href="/tags#jQuery" class="list-group-item">jQuery<span class="badge">4</span></a>
        
        <a href="/tags#spring" class="list-group-item">spring<span class="badge">3</span></a>
        
        <a href="/tags#%E8%AF%91%E6%96%87" class="list-group-item">译文<span class="badge">18</span></a>
        
        <a href="/tags#pl/sql" class="list-group-item">pl/sql<span class="badge">8</span></a>
        
        <a href="/tags#mybatis" class="list-group-item">mybatis<span class="badge">4</span></a>
        
        <a href="/tags#database" class="list-group-item">database<span class="badge">1</span></a>
        
        <a href="/tags#hibernate" class="list-group-item">hibernate<span class="badge">1</span></a>
        
        <a href="/tags#cache" class="list-group-item">cache<span class="badge">1</span></a>
        
        <a href="/tags#git" class="list-group-item">git<span class="badge">2</span></a>
        
        <a href="/tags#java" class="list-group-item">java<span class="badge">1</span></a>
        
        <a href="/tags#awk" class="list-group-item">awk<span class="badge">2</span></a>
        
        <a href="/tags#linux" class="list-group-item">linux<span class="badge">3</span></a>
        
        <a href="/tags#stripes" class="list-group-item">stripes<span class="badge">15</span></a>
        
    </div>
</div>
            <div class="row">
                <div class="col-xs-12 col-md-6 col-lg-6">
                    <!-- 归档 -->
                    <div class="panel panel-primary">
    <div class="panel-heading">
        <h2 class="panel-title">归档</h2>
    </div>
    <div class="panel-body">
        <ul class="nav nav-list">
            
            
             
            <li>
<a href="/archives#2016-11">2016-11
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2016-09">2016-09
                
                
                <span class="badge">2</span></a>
            </li>
            
            
            
            
             
            <li>
<a href="/archives#2016-08">2016-08
                
                
                <span class="badge">3</span></a>
            </li>
            
            
            
            
            
            
             
            <li>
<a href="/archives#2016-07">2016-07
                
                
                <span class="badge">9</span></a>
            </li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
             
            <li>
<a href="/archives#2016-04">2016-04
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2016-03">2016-03
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2016-02">2016-02
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2016-01">2016-01
                
                
                <span class="badge">2</span></a>
            </li>
            
            
            
            
             
            <li>
<a href="/archives#2015-08">2015-08
                
                
                <span class="badge">5</span></a>
            </li>
            
            
            
            
            
            
            
            
            
            
             
            <li>
<a href="/archives#2015-07">2015-07
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2014-05">2014-05
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2013-11">2013-11
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2013-08">2013-08
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2013-07">2013-07
                
                
                <span class="badge">3</span></a>
            </li>
            
            
            
            
            
            
             
            <li>
<a href="/archives#2013-05">2013-05
                
                
                <span class="badge">3</span></a>
            </li>
            
            
            
            
            
            
             
            <li>
<a href="/archives#2012-12">2012-12
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2012-09">2012-09
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2012-05">2012-05
                
                
                <span class="badge">2</span></a>
            </li>
            
            
            
            
             
            <li>
<a href="/archives#2011-11">2011-11
                
                
                <span class="badge">5</span></a>
            </li>
            
            
            
            
            
            
            
            
            
            
             
            <li>
<a href="/archives#2011-06">2011-06
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2011-04">2011-04
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2010-04">2010-04
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2009-09">2009-09
                
                
                <span class="badge">1</span></a>
            </li>
            
            
             
            <li>
<a href="/archives#2009-08">2009-08
                
                
                <span class="badge">2</span></a>
            </li>
            
            
            
        </ul>
    </div>
</div>
                </div>
                <div class="col-xs-12 col-md-6 col-lg-6">
                    <!-- 文章分类 -->
                    <div class="panel panel-primary">
    <div class="panel-heading">
        <h2 class="panel-title">文章分类</h2>
    </div>
    <div class="panel-body">
        <ul class="nav nav-list">
            
            <li>
                <a href="/categorys#javascript">javascript<sup style="padding-left: 4px">6</sup></a>
            </li>
            
            <li>
                <a href="/categorys#struts2">struts2<sup style="padding-left: 4px">1</sup></a>
            </li>
            
            <li>
                <a href="/categorys#spring">spring<sup style="padding-left: 4px">3</sup></a>
            </li>
            
            <li>
                <a href="/categorys#SQL">SQL<sup style="padding-left: 4px">8</sup></a>
            </li>
            
            <li>
                <a href="/categorys#jQuery">jQuery<sup style="padding-left: 4px">3</sup></a>
            </li>
            
            <li>
                <a href="/categorys#mybatis">mybatis<sup style="padding-left: 4px">4</sup></a>
            </li>
            
            <li>
                <a href="/categorys#database">database<sup style="padding-left: 4px">1</sup></a>
            </li>
            
            <li>
                <a href="/categorys#hibernate">hibernate<sup style="padding-left: 4px">1</sup></a>
            </li>
            
            <li>
                <a href="/categorys#git">git<sup style="padding-left: 4px">2</sup></a>
            </li>
            
            <li>
                <a href="/categorys#java">java<sup style="padding-left: 4px">1</sup></a>
            </li>
            
            <li>
                <a href="/categorys#%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80">脚本语言<sup style="padding-left: 4px">2</sup></a>
            </li>
            
            <li>
                <a href="/categorys#%E5%85%B6%E4%BB%96">其他<sup style="padding-left: 4px">3</sup></a>
            </li>
            
            <li>
                <a href="/categorys#stripes">stripes<sup style="padding-left: 4px">15</sup></a>
            </li>
            
        </ul>
    </div>
</div>
                </div>
            </div>
        </div>
    </div>
</div>
<hr>
<footer>
    <p class="text-center">©2016 by Leeyee, All Rights Reserved</p>
</footer>
<!--<script type="text/javascript" src="/js/MathJax.js"></script>-->
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript">
    !window.jQuery && document.write('<script src="/js/jquery-1.11.1.min.js"><\/script>');
</script>
<script type="text/javascript" src="/js/common.js"></script>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="http://apps.bdimg.com/libs/html5shiv/r29/html5.min.js"></script>
<script src="http://apps.bdimg.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<div id="totop" class="toTop" style="display: block; opacity: 1;">
    <button type="button" class="btn btn-info btn-lg">Top<span class="glyphicon glyphicon-plane"></span></button>
</div>
</body>
</html>
